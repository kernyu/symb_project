BACKGROUND: To assess the effect of previous antibiotic use on the risk of a resistant Escherichia coli urinary tract infection (UTI), we undertook a case-control study with prospective measurement of outcomes in 10 general practices in the UK. METHODS: Urinary samples from all patients with symptoms suggestive of UTIs were sought, and those with a laboratory-proven E. coli infection were interviewed and their medical records examined. Case patients were those with ampicillin- or trimethoprim-resistant infections and control patients had infections that were susceptible to antibiotics, including ampicillin and trimethoprim. RESULTS: Risk of ampicillin-resistant E. coli infection in 903 patients was associated with amoxicillin prescriptions of >or=7 days duration in the previous 1 month [odds ratio (OR)=3.91, 95% CI 1.64-9.34] and previous 2-3 months (2.29, 1.12-4.70) before illness onset. For prescriptions <7 days duration, there was no statistically significant association. Higher doses of amoxicillin were associated with lower risk of ampicillin resistance. For trimethoprim-resistant E. coli infections, the OR was 8.44 (3.12-22.86) for prescriptions of trimethoprim of >or=7 days in the previous month and 13.91 (3.32-58.31) for the previous 2-3 months. For trimethoprim prescriptions of <7 days, the OR was 4.03 (1.69-9.59) for the previous month but prescribing in earlier periods was not significantly associated with resistance. CONCLUSIONS: Within the community setting, exposure to antibiotics is a strong risk factor for a resistant E. coli UTI. High-dose, shorter-duration antibiotic regimens may reduce the pressure on the emergence of antibiotic resistance.
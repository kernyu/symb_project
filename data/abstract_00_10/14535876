BACKGROUND: The resistance of Helicobacter pylori to antibiotics has been advocated as a major cause of treatment failure, and antimicrobial sensitivity testing has been proposed to improve efficacy; however, its role before first-line therapy has not been investigated in detail. AIM: To assess whether antimicrobial sensitivity testing improves the eradication rate of first-line anti-Helicobacter treatments and to compare the effectiveness of ranitidine bismuth citrate and omeprazole in the presence of H. pylori resistance to antibiotics. METHODS: Two hundred and forty-two patients were assigned to either empirical or antimicrobial sensitivity testing-based treatment; within each group, subjects were further randomized to receive ranitidine bismuth citrate, 400 mg b.d., tinidazole, 500 mg b.d., and clarithromycin, 500 mg b.d., or omeprazole, 20 mg b.d., clarithromycin, 500 mg b.d., and amoxicillin, 1 g b.d., for 1 week, with substitution of the resistant antibiotic in the antimicrobial sensitivity testing-based treatment group. RESULTS: Eradication rates were 67% [confidence interval (CI), 55-79%] in the empirical treatment group and 76% (CI, 65-87%) in the antimicrobial sensitivity testing-based group (P=N.S.). The overall success rate was 60% (CI, 51-69%) with omeprazole and 82% (CI, 73-91%) with ranitidine bismuth citrate (P<0.03); the latter overcame antibiotic resistance in 12 of 15 strains vs. zero of eight strains by omeprazole. CONCLUSIONS: Antimicrobial sensitivity testing before first-line treatment does not improve the eradication rate, which is greater when ranitidine bismuth citrate is included in the treatment.
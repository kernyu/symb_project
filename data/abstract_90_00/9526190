SETTING: Patient non-compliance and/or spatial heterogeneity in drug concentration or effectiveness may contribute to the emergence of drug resistance during multiple-drug chemotherapy of tuberculosis. OBJECTIVE: Using mathematical models of mycobacterial population dynamics under antimicrobial treatment, to assess the effects of non-compliance, heterogeneity and other factors on the success of treatment. DESIGN: A mathematical model is used to generate predictions about the ascent of drug resistance in treated hosts with non-compliance and/or a 'protected compartment' of bacteria where only one drug is active; simulations of a more realistic version of this model take into account random mutation, and different assumptions about the size of, and growth rate of bacteria in, the protected compartment. RESULTS: The existence of a protected compartment can increase the likelihood of resistance to the single drug active in that compartment, but only if bacteria resistant to that drug can grow in the protected compartment or if the host is non-adherent to the treatment regimen. However, the protected compartment may also slow the ascent of bacteria resistant to drugs not active in it (e.g. isoniazid) by providing a reservoir of non-selected mycobacteria. The model predicts that relative rates of killing are more important than mutation rates in determining the order in which resistant mutants ascend. Model predictions, in combination with data about drug resistance patterns, suggest that non-compliance, but not heterogeneity, is an important cause of treatment failure. CONCLUSION: Patterns of acquired drug resistance may be used to infer processes of selection during treatment; mathematical models can aid in generating predictions about the relative impacts of treatment parameters in the evolution of resistance, and eventually in suggesting improved treatment protocols.
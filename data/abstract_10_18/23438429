The use of antiretroviral therapy (ART) is the most efficient measure in controlling the HIV epidemic. However, emergence of drug-resistant strains can reduce the potential benefits of ART. The viral dynamics of drug-sensitive and drug-resistant strains at the individual level may play a crucial role in the emergence and spread of drug resistance in a population. We investigate the effect of the viral dynamics within an infected individual on the epidemiological dynamics of HIV using a nested model that links both dynamical levels. A time-dependent between-host transmission rate that receives feedback from a model of two-strain virus dynamics within a host is incorporated into an epidemiological model of HIV. We analyze the resulting dynamics of the model and identify model parameters such as time when ART is initiated, fraction of cases treated, and the probability that a patient develops drug resistance, as having the greatest impact on total infection and prevalence of drug resistance. Importantly, for small values of the risk of a patient developing drug resistance, increasing the fraction of cases treated can increase the cumulative number of infected individuals. Such a pattern is the result of the balance between not treating a patient and having future cases still sensitive to treatment, and treating the patient and increasing the chances for future (untreatable) drug-resistant infections. The current modeling framework incorporates important aspects of virus dynamics within a host into an epidemic model. This approach provides useful insights on the drug resistance dynamics of an epidemic of HIV, which may assist in identifying an optimal use of ART.
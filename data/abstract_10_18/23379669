BACKGROUND: Population transmission models of antiretroviral therapy (ART) and pre-exposure prophylaxis (PrEP) use simplistic assumptions--typically constant, homogeneous rates--to represent the short-term risk and long-term effects of drug resistance. In contrast, within-host models of drug resistance allow for more detailed dynamics of host immunity, latent reservoirs of virus, and drug PK/PD. Bridging these two levels of modeling detail requires an understanding of the "levers"--model parameters or combinations thereof--that change only one independent observable at a time. Using the example of accidental tenofovir-based pre-exposure prophyaxis (PrEP) use during HIV infection, we will explore methods of implementing host heterogeneities and their long-term effects on drug resistance. RESULTS: We combined and extended existing models of virus dynamics by incorporating pharmacokinetics, pharmacodynamics, and adherence behavior. We identified two "levers" associated with the host immune pressure against the virus, which can be used to independently modify the setpoint viral load and the shape of the acute phase viral load peak. We propose parameter relationships that can explain differences in acute and setpoint viral load among hosts, and demonstrate their influence on the rates of emergence and reversion of drug resistance. The importance of these dynamics is illustrated by modeling long-lived latent reservoirs of virus, through which past intervals of drug resistance can lead to failure of suppressive drug regimens. Finally, we analyze assumptions about temporal patterns of drug adherence and their impact on resistance dynamics, finding that with the same overall level of adherence, the dwell times in drug-adherent versus not-adherent states can alter the levels of drug-resistant virus incorporated into latent reservoirs. CONCLUSIONS: We have shown how a diverse range of observable viral load trajectories can be produced from a basic model of virus dynamics using immunity-related "levers". Immune pressure, in turn, influences the dynamics of drug resistance, with increased immune activity delaying drug resistance and driving more rapid return to dominance of drug-susceptible virus after drug cessation. Both immune pressure and patterns of drug adherence influence the long-term risk of drug resistance. In the case of accidental PrEP use during infection, rapid transitions between adherence states and/or weak immunity fortifies the "memory" of previous PrEP exposure, increasing the risk of future drug resistance. This model framework provides a means for analyzing individual-level risks of drug resistance and implementing heterogeneities among hosts, thereby achieving a crucial prerequisite for improving population-level models of drug resistance.
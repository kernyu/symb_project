OBJECTIVES: The prospective study was designed to clarify the impact of CYP2C19 on quadruple therapies and survey the efficacies of rabeprazole-based quadruple therapy for Helicobacter pylori infection after failure of standard triple therapies. PATIENTS AND METHODS: From January 2007 to March 2009, 1055 H. pylori-infected patients received standard triple regimens (proton-pump inhibitor (PPI), clarithromycin, and amoxicillin). Helicobacter pylori eradication was achieved in 865 (81.9%) subjects. One hundred ninety eradication-failure patients were enrolled and randomly assigned to receive a 7-day eradication therapy. Ninety-six patients were treated with esomeprazole-based quadruple rescue therapies (EB), while 94 patients were treated with rabeprazole-based quadruple rescue therapies (RB). Follow-up endoscopy was done 16 weeks later to assess the treatment response. Patients' responses, CYP2C19 genotypes, and antibiotics resistances were also examined. RESULTS: Intention-to-treat analysis revealed that RB had better eradication rates than EB (EB: 72.9%; 95% CI: 64.9-80.9% and RB: 78.7%; 95% CI 72.5-84.9%) (p value = .543). Per-protocol results were EB = 75.3%; 95% CI: 70.3-80.3% and RB = 85.1%; 95% CI: 80.6-89.6% (p value = .0401). Both regimens had similar compliance (p value = 0.155) and adverse events (p value = 0.219). We also surveyed those patients without resistance of any antibiotics. RB still showed better outcome than EB. Our data showed that esomeprazole-based regimen and CYP2C19 Hom EM genotype were important predictors for eradication failure. CONCLUSIONS: In quadruple therapy, rabeprazole-based regimens had better efficacy than esomeprazole-based regimens. CYP2C19 polymorphism also played an important role in quadruple therapy. It seems advisable to change PPI to rabeprazole in second-line quadruple therapy.
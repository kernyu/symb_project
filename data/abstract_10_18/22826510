A large fraction of the genes from sequenced organisms are of unknown function. This limits biological insight, and for pathogenic microorganisms hampers the development of new approaches to battle infections. There is thus a great need for novel strategies that link genotypes to phenotypes for microorganisms. We describe a high-throughput strategy based on the method Tn-seq that can be applied to any genetically manipulatable microorganism. By screening 17 in vitro and two in vivo (carriage and infection) conditions for the pathogen Streptococcus pneumoniae, we create a resource consisting of >1800 interactions that is rich in new genotype-phenotype relationships. We describe genes that are involved in differential carbon source utilization in the host, as well as genes that are involved both in virulence and in resistance against specific in vitro stresses, thereby revealing selection pressures that the pathogen experiences in vivo. We reveal the secondary response to an antibiotic, including a dual role efflux pump also involved in resistance to pH stress. Through genetic-interaction mapping and gene-expression analysis we define the mechanism of attenuation and the regulatory relationship between a two-component system and a core biosynthetic pathway specific to microorganisms. Thus, we have generated a resource that provides detailed insight into the biology and virulence of S. pneumoniae and provided a road map for similar discovery in other microorganisms.
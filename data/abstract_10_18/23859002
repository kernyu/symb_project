The emergence and spread of drug resistance is one of the most challenging public health issues in the treatment of some infectious diseases. The objective of this work is to investigate whether the effect of resistance can be contained through a time-dependent treatment strategy during the epidemic subject to an isoperimetric constraint. We apply control theory to a population dynamical model of influenza infection with drug-sensitive and drug-resistant strains, and solve the associated control problem to find the optimal treatment profile that minimizes the cumulative number of infections (i.e. the epidemic final size). We consider the problem under the assumption of limited drug stockpile and show that as the size of stockpile increases, a longer delay in start of treatment is required to minimize the total number of infections. Our findings show that the amount of drugs used to minimize the total number of infections depends on the rate of de novo resistance regardless of the initial size of drug stockpile. We demonstrate that both the rate of resistance emergence and the relative transmissibility of the resistant strain play important roles in determining the optimal timing and level of treatment profile.
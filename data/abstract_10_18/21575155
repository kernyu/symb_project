BACKGROUND: Current guidelines for providing antiretroviral therapy (ART) in South Africa's public sector programme call for switching patients from first-line to second-line treatment upon virologic failure as indicated by two consecutive viral loads above 5000 copies/ml, but without laboratory evidence of viral resistance. We modelled the net cost of adding resistance testing for patients with virological failure and retaining patients without resistance on first-line therapy, rather than switching all failures to second-line therapy. METHODS: Costs were estimated for three scenarios: routine maintenance (standard care without resistance testing, switch all failures to second line); resistance testing (resistance test for patients with failure, switch those with resistance); and limited testing (resistance test for patients with failure in the first three years, switch those with resistance). A Markov model was used to estimate the cost of each arm over five years after first line initiation. Rates of treatment failure, viral resistance and treatment costs were estimated with primary data from a large HIV treatment cohort at a public facility in Johannesburg. Future costs were discounted at 3%. RESULTS: Virological failure rates over five years were 19.8% in routine maintenance and 20.2% in resistance testing and limited testing; 16.8% and 11.4% of failures in routine and limited testing, respectively, did not have any resistance mutations, resulting in 3.1% and 2.0% fewer patients switching to second-line ART by the end of five years. Treatment costs were estimated at US$526 and $1268 per patient per year on first-line and second-line therapy, respectively; a resistance test cost $242. The total average cost per patient over five years was $2780 in routine maintenance; $2775 in resistance testing; and $2763 in limited testing. CONCLUSIONS: Incorporating resistance testing into treatment guidelines in South Africa is potentially cost-neutral and can identify other reasons for failure, conserve treatment options, and generate information about emerging resistance patterns.
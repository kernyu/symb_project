Rifampin (RIF) is a first-line drug used for the treatment of tuberculosis and other bacterial infections. Various RIF resistance mechanisms have been reported, and recently an RIF-inactivation enzyme, RIF phosphotransferase (RPH), was reported to phosphorylate RIF at its C21 hydroxyl at the cost of ATP. However, the underlying molecular mechanism remained unknown. Here, we solve the structures of RPH from Listeria monocytogenes (LmRPH) in different conformations. LmRPH comprises three domains: an ATP-binding domain (AD), an RIF-binding domain (RD), and a catalytic His-containing domain (HD). Structural analyses reveal that the C-terminal HD can swing between the AD and RD, like a toggle switch, to transfer phosphate. In addition to its catalytic role, the HD can bind to the AD and induce conformational changes that stabilize ATP binding, and the binding of the HD to the RD is required for the formation of the RIF-binding pocket. A line of hydrophobic residues forms the RIF-binding pocket and interacts with the 1-amino, 2-naphthol, 4-sulfonic acid and naphthol moieties of RIF. The R group of RIF points toward the outside of the pocket, explaining the low substrate selectivity of RPH. Four residues near the C21 hydroxyl of RIF, His825, Arg666, Lys670, and Gln337, were found to play essential roles in the phosphorylation of RIF; among these the His825 residue may function as the phosphate acceptor and donor. Our study reveals the molecular mechanism of RIF phosphorylation catalyzed by RPH and will guide the development of a new generation of rifamycins.
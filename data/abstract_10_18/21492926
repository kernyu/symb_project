BACKGROUND: In accordance with WHO guidelines, people with HIV infection in Botswana receive daily isoniazid preventive therapy against tuberculosis without obtaining a tuberculin skin test, but duration of prophylaxis is restricted to 6 months. We aimed to assess effectiveness of extended isoniazid therapy. METHODS: In our randomised, double-blind, placebo-controlled trial we enrolled adults infected with HIV aged 18 years or older at government HIV-care clinics in Botswana. Exclusion criteria included current illness such as cough and an abnormal chest radiograph without antecedent tuberculosis or pneumonia. Eligible individuals were randomly allocated (1:1) to receive 6 months' open-label isoniazid followed by 30 months' masked placebo (control group) or 6 months' open-label isoniazid followed by 30 months' masked isoniazid (continued isoniazid group) on the basis of a computer-generated randomisation list with permuted blocks of ten at each clinic. Antiretroviral therapy was provided if participants had CD4-positive lymphocyte counts of fewer than 200 cells per muL. We used Cox regression analysis and the log-rank test to compare incident tuberculosis in the groups. Cox regression models were used to estimate the effect of antiretroviral therapy. The trial is registered at ClinicalTrials.gov, number NCT00164281. FINDINGS: Between Nov 26, 2004, and July 3, 2009, we recorded 34 (3.4%) cases of incident tuberculosis in 989 participants allocated to the control group and 20 (2.0%) in 1006 allocated to the continued isoniazid group (incidence 1.26% per year vs 0.72%; hazard ratio 0.57, 95% CI 0.33-0.99, p=0.047). Tuberculosis incidence in those individuals receiving placebo escalated approximately 200 days after completion of open-label isoniazid. Participants who were tuberculin skin test positive (ie, >/=5 mm induration) at enrolment received a substantial benefit from continued isoniazid treatment (0.26, 0.09-0.80, p=0.02), whereas participants who were tuberculin skin test-negative received no significant benefit (0.75, 0.38-1.46, p=0.40). By study completion, 946 (47%) of 1995 participants had initiated antiretroviral therapy. Tuberculosis incidence was reduced by 50% in those receiving 360 days of antiretroviral therapy compared with participants receiving no antiretroviral therapy (adjusted hazard ratio 0.50, 95% CI 0.26-0.97). Severe adverse events and death were much the same in the control and continued isoniazid groups. INTERPRETATION: In a tuberculosis-endemic setting, 36 months' isoniazid prophylaxis was more effective for prevention of tuberculosis than was 6-month prophylaxis in individuals with HIV infection, and chiefly benefited those who were tuberculin skin test positive. FUNDING: US Centers for Disease Control and Prevention and US Agency for International Development.